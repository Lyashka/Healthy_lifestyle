import{l as k,D as x,r as h,f as F}from"./index-ChbhjhMB.js";function l(r){const i=r.replace(",",".").replace(/\s/g,"");return parseFloat(i)}const v=k("calendarDays",()=>{const r=x([]),i=h(new Date),c=h({}),g=function(a){r.some(n=>n.date.includes(a.date))||r.push({date:a.date,breakfast:[],lunch:[],dinner:[]}),f(a)};function f(a){r.forEach(e=>{e.date==a.date&&(a.ration.id===1?a.selectedFoods.forEach(n=>{e.breakfast.push({id:e.breakfast.length!=0?e.breakfast[e.breakfast.length-1].id+1:1,...n})}):a.ration.id===2?a.selectedFoods.forEach(n=>{e.lunch.push({id:e.lunch.length!=0?e.lunch[e.lunch.length-1].id+1:1,...n})}):a.ration.id===3&&a.selectedFoods.forEach(n=>{e.dinner.push({id:e.dinner.length!=0?e.dinner[e.dinner.length-1].id+1:1,...n})}))})}function y(a,e,n){r.forEach(s=>{if(s.date===a){if(e===1){const t=s.breakfast.findIndex(o=>o.id===n);t!=-1&&s.breakfast.splice(t,1)}else if(e===2){const t=s.lunch.findIndex(o=>o.id===n);t!=-1&&s.lunch.splice(t,1)}else if(e===3){const t=s.dinner.findIndex(o=>o.id===n);t!=-1&&s.dinner.splice(t,1)}}})}function E(){return i.value.toLocaleDateString()}function p(a){i.value=a,d()}function d(){let a=!0;return r.forEach(e=>{e.date==i.value.toLocaleDateString()&&(c.value=e,a=!1)}),a&&(c.value={}),c.value}function D(){const a=d();let e=0;return a?(a.breakfast&&a.breakfast.forEach(n=>{e+=l(n.calories)}),a.lunch&&a.lunch.forEach(n=>{e+=l(n.calories)}),a.dinner&&a.dinner.forEach(n=>{e+=l(n.calories)}),u(a,e),e):(u(a,e),e)}function u(a,e){r.forEach(n=>{n.date==a.date&&(n.summCalories=e)})}function b(a){a.forEach(e=>{r.some(n=>n.date==e.date)||r.push(e)})}return F(r,()=>{localStorage.setItem("calendarDays",JSON.stringify(r))}),{calendarDays:r,dataForDay:c,addNewDataInCalendar:g,getTargetDate:E,editTargetDate:p,getDataForDay:d,removePositionFromRation:y,calculateMyCalories:D,updateCalendarDays:b}});export{l as t,v as u};
