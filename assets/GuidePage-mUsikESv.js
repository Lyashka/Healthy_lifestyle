import{u as X,r as _,e as $,o as Y,a as o,b as d,g as V,w as t,d as e,p as y,c as x,t as n,h as w,k as Z,j as c}from"./index-ChbhjhMB.js";import{_ as ee,u as te,l as ae,f as le,a as oe}from"./food_base-Ck6sU6wh.js";const se={class:"text-center pl-1"},ne={key:0,class:"text-center mb-2"},ce={key:1,class:"mb-9"},de=["onClick"],re={class:"column-name"},ue={class:"text-center"},ie={key:0,class:"text-center"},_e={key:1,class:"text-center"},ve={key:2,class:"text-center"},fe={class:"text-center"},me={__name:"GuidePage",setup(pe){const{name:N}=X(),{getMyFoods:C,filterMyFoods:A,updateMyFood:z,removeMyFoods:U}=te(),v=_([]),B=_(""),b=_(!1),m=_(!1),i=_([]),k=_(!1),r=_({}),p=$(()=>N.value=="xs"),W=$(()=>N.value=="xs"?[{title:"Название",align:"start",sortable:!1,key:"name"},{title:"Ккал",align:"center",sortable:!1,key:"calories"},{text:"Actions",align:"center",value:"actions",sortable:!1}]:[{title:"Название",align:"start",sortable:!1,key:"name"},{title:"Ккал",align:"center",sortable:!1,key:"calories"},{title:"Белок",align:"center",sortable:!1,key:"proteins"},{title:"Жиры",align:"center",sortable:!1,key:"fats"},{title:"Углеводы",align:"center",sortable:!1,key:"carbs"},{text:"Actions",align:"center",value:"actions",sortable:!1}]),j=s=>{b.value=!0,E(s)},E=ae.debounce(s=>{const a=C();if(s){const S=G(s).map((M,u)=>({...M,productWeight:100,id:u+1})),f=A(s);i.value=[...f,...S],localStorage.setItem("filteredFood",JSON.stringify(i.value)),b.value=!1}else i.value=[...a,...v.value],b.value=!1},800);function G(s){return v.value.filter(a=>a.name.toLowerCase().includes(s.toLowerCase()))}function J(s,a){m.value=s,i.value=a}function L(s){U(s.id),i.value=[...C(),...v.value]}function O(s){p.value&&(r.value=s,k.value=!0)}return Y(async()=>{v.value=le,localStorage.getItem("myFoods")&&z(JSON.parse(localStorage.getItem("myFoods"))),i.value=[...C(),...v.value]}),(s,a)=>{const S=o("v-text-field"),f=o("v-btn"),M=o("v-dialog"),u=o("v-card-text"),P=o("v-progress-circular"),R=o("v-data-table"),g=o("v-card-title"),T=o("v-card-subtitle"),h=o("v-card-item"),F=o("v-col"),I=o("v-row"),q=o("v-spacer"),H=o("v-card-actions"),D=o("v-card"),K=o("v-overlay");return d(),V(D,{elevation:"4",class:"guide-container bg-grey-lighten-2"},{default:t(()=>[e(u,{class:"guide-container-header"},{default:t(()=>[e(S,{block:"",label:"Введите продукт",variant:"solo-inverted","append-inner-icon":"mdi-magnify",type:"input",modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value=l),class:"pr-1",onInput:a[1]||(a[1]=l=>j(l.target.value))},null,8,["modelValue"]),y("div",se,[p.value?(d(),V(f,{key:1,icon:"mdi-plus",onClick:a[3]||(a[3]=l=>m.value=!0)})):(d(),V(f,{key:0,height:"73%",text:"Добавить продукт",onClick:a[2]||(a[2]=l=>m.value=!0)}))]),e(M,{width:"500",modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=l=>m.value=l)},{default:t(()=>[e(oe,{foodBase:v.value,onSetDialogAndFilteredFood:J},null,8,["foodBase"])]),_:1},8,["modelValue"])]),_:1}),b.value?(d(),x("div",ne,[e(P,{indeterminate:"",width:4})])):(d(),x("div",ce)),e(R,{headers:W.value,items:i.value,height:"700","item-value":"name"},{item:t(({item:l})=>[y("tr",{onClick:Q=>O(l)},[y("td",re,n(l.name),1),y("td",ue,n(l.calories),1),p.value?w("",!0):(d(),x("td",ie,n(l.proteins),1)),p.value?w("",!0):(d(),x("td",_e,n(l.fats),1)),p.value?w("",!0):(d(),x("td",ve,n(l.carbs),1)),y("td",fe,[l.canDelete?(d(),V(f,{key:0,variant:"text",icon:"mdi-delete","x-small":"",onClick:Z(Q=>L(l),["stop"])},null,8,["onClick"])):w("",!0)])],8,de)]),_:1},8,["headers","items"]),e(K,{class:"align-center justify-center","min-width":"400","max-width":"700",modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=l=>k.value=l)},{default:t(()=>[e(D,null,{default:t(()=>[e(g,null,{default:t(()=>[c(n(r.value.name),1)]),_:1}),e(T,null,{default:t(()=>[c(" На "+n(r.value.productWeight?r.value.productWeight:100)+" г. продукта ",1)]),_:1}),e(u,null,{default:t(()=>[e(I,{"no-gutters":"",class:"text-center"},{default:t(()=>[e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[c(" Калории ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[c(n(r.value.calories),1)]),_:1})]),_:1})]),_:1}),e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[c(" Белок ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[c(n(r.value.proteins),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{"no-gutters":"",class:"text-center"},{default:t(()=>[e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[c(" Жиры ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[c(n(r.value.fats),1)]),_:1})]),_:1})]),_:1}),e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[c(" Углеводы ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[c(n(r.value.carbs),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(q),e(f,{text:"Назад",onClick:a[5]||(a[5]=l=>k.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},xe=ee(me,[["__scopeId","data-v-f1ba16fc"]]);export{xe as default};
