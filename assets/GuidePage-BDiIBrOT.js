import{r as s,g as Q,o as X,a as n,b as x,j as h,w as o,d as a,q as Y,e as N,n as Z,u as m,c as U,k as ee}from"./index-DIe_Hn7T.js";import{_ as le,u as ae,l as te,f as oe,c as f}from"./food_base-CHJH9EUq.js";const se={class:"text-center pl-1"},ne={key:0,class:"text-center mb-2"},ue={key:1,class:"mb-9"},de={__name:"GuidePage",setup(re){const B=ae(),{addMyFoods:I,getMyFoods:V,filterMyFoods:$,searchDuplicatesMyFood:D,updateMyFood:A,removeMyFoods:O}=B,r=s([]),S=s(""),k=s(!1),p=s(!1),i=s(""),c=s(100),b=s(""),_=s(""),g=s(""),y=s(""),d=s([]),W=[{title:"Название",align:"start",sortable:!1,key:"name"},{title:"Ккал",align:"end",sortable:!1,key:"calories"},{title:"Белок",align:"end",sortable:!1,key:"proteins"},{title:"Жиры",align:"end",sortable:!1,key:"fats"},{title:"Углеводы",align:"end",sortable:!1,key:"carbs"},{text:"Actions",align:"center",value:"actions",sortable:!1}],E=t=>{k.value=!0,G(t)},G=te.debounce(t=>{const e=V();if(t){const u=J(t).map((M,F)=>({...M,productWeight:100,id:F+1})),v=$(t);d.value=[...v,...u],localStorage.setItem("showFoods",JSON.stringify(d.value)),k.value=!1}else d.value=[...e,...r.value],k.value=!1},800);function J(t){return r.value.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))}const L=Q(()=>D(i.value)||b.value==""||_.value==""||g.value==""||y.value==""||i.value=="");function P(){const t={name:i.value,productWeight:c.value,calories:`${b.value} кКал`,proteins:`${_.value} г`,fats:`${g.value} г`,carbs:`${y.value} г`};I(t),d.value=[...V(),...r.value],c.value=100,C(),p.value=!1}function j(){C(),c.value=100,p.value=!1}function C(){i.value="",c.value=100,b.value="",_.value="",g.value="",y.value=""}function q(t){O(t.id),d.value=[...V(),...r.value]}return X(async()=>{r.value=oe,localStorage.getItem("myFoods")&&A(JSON.parse(localStorage.getItem("myFoods"))),d.value=[...V(),...r.value]}),(t,e)=>{const u=n("v-text-field"),v=n("v-btn"),M=n("v-card-title"),F=n("v-card-text"),w=n("v-card"),R=n("v-form"),T=n("v-dialog"),z=n("v-progress-circular"),H=n("v-icon"),K=n("v-data-table");return x(),h(w,{class:"guide-container",elevation:"4",style:{"background-color":"rgb(228,228,228)"}},{default:o(()=>[a(F,{class:"guide-container-header"},{default:o(()=>[a(u,{block:"",label:"Введите продукт",variant:"solo-inverted","append-inner-icon":"mdi-magnify",type:"input",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),class:"pr-1",onInput:e[1]||(e[1]=l=>E(l.target.value))},null,8,["modelValue"]),Y("div",se,[a(v,{height:"73%",onClick:e[2]||(e[2]=l=>p.value=!0)},{default:o(()=>[N("Добавить продукт")]),_:1})]),a(T,{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=l=>p.value=l),width:"500"},{default:o(()=>[a(R,{"fast-fail":"",onSubmit:e[9]||(e[9]=Z(()=>{},["prevent"]))},{default:o(()=>[a(w,{"min-height":"500"},{actions:o(()=>[a(v,{class:"ms-auto",text:"Cancel",onClick:j}),a(v,{text:"Ok",type:"submit",disabled:L.value,onClick:P},null,8,["disabled"])]),default:o(()=>[a(M,null,{default:o(()=>[N(" Добавить новое блюдо/напиток ")]),_:1}),a(F,{class:"pa-0"},{default:o(()=>[a(u,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),rules:[m(f).checkStringName],label:"Название"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),rules:[m(f).checkNumber],label:"г/мл"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=l=>b.value=l),rules:[m(f).checkNumber],label:"Калории"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=l=>_.value=l),rules:[m(f).checkNumber],label:"Белок"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:g.value,"onUpdate:modelValue":e[7]||(e[7]=l=>g.value=l),rules:[m(f).checkNumber],label:"Жиры"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:y.value,"onUpdate:modelValue":e[8]||(e[8]=l=>y.value=l),rules:[m(f).checkNumber],label:"Углеводы"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),k.value?(x(),U("div",ne,[a(z,{indeterminate:"",width:4})])):(x(),U("div",ue)),a(K,{headers:W,items:d.value,height:"700","item-value":"name"},{"item.actions":o(({item:l})=>[l.canDelete?(x(),h(v,{key:0,variant:"text",icon:"","x-small":"",onClick:ie=>q(l)},{default:o(()=>[a(H,null,{default:o(()=>[N("mdi-delete")]),_:1})]),_:2},1032,["onClick"])):ee("",!0)]),_:1},8,["items"])]),_:1})}}},me=le(de,[["__scopeId","data-v-9c4523b3"]]);export{me as default};
