import{f as Y,g as $,r as _,o as Z,a as o,b as d,j as w,w as t,d as e,q as y,e as n,c as b,t as c,k as V,n as ee}from"./index-f3C8hHbk.js";import{_ as te,u as ae,l as le,f as oe,a as se}from"./food_base-lY4VEEai.js";const ne={class:"text-center pl-1"},ce={key:0,class:"text-center mb-2"},de={key:1,class:"mb-9"},re=["onClick"],ue={class:"column-name"},ie={class:"text-center"},_e={key:0,class:"text-center"},ve={key:1,class:"text-center"},fe={key:2,class:"text-center"},me={class:"text-center"},pe={__name:"GuidePage",setup(ge){const A=ae(),{getMyFoods:C,filterMyFoods:z,updateMyFood:U,removeMyFoods:W}=A,{name:N}=Y(),m=$(()=>N.value=="xs"),v=_([]),B=_(""),x=_(!1),p=_(!1),i=_([]),k=_(!1),r=_({}),j=$(()=>N.value=="xs"?[{title:"Название",align:"start",sortable:!1,key:"name"},{title:"Ккал",align:"center",sortable:!1,key:"calories"},{text:"Actions",align:"center",value:"actions",sortable:!1}]:[{title:"Название",align:"start",sortable:!1,key:"name"},{title:"Ккал",align:"center",sortable:!1,key:"calories"},{title:"Белок",align:"center",sortable:!1,key:"proteins"},{title:"Жиры",align:"center",sortable:!1,key:"fats"},{title:"Углеводы",align:"center",sortable:!1,key:"carbs"},{text:"Actions",align:"center",value:"actions",sortable:!1}]),E=s=>{x.value=!0,G(s)},G=le.debounce(s=>{const a=C();if(s){const S=J(s).map((M,u)=>({...M,productWeight:100,id:u+1})),f=z(s);i.value=[...f,...S],localStorage.setItem("showFoods",JSON.stringify(i.value)),x.value=!1}else i.value=[...a,...v.value],x.value=!1},800);function J(s){return v.value.filter(a=>a.name.toLowerCase().includes(s.toLowerCase()))}function L(s,a){p.value=s,i.value=a}function O(s){W(s.id),i.value=[...C(),...v.value]}function P(s){m.value&&(r.value=s,k.value=!0)}return Z(async()=>{v.value=oe,localStorage.getItem("myFoods")&&U(JSON.parse(localStorage.getItem("myFoods"))),i.value=[...C(),...v.value]}),(s,a)=>{const S=o("v-text-field"),f=o("v-btn"),M=o("v-dialog"),u=o("v-card-text"),q=o("v-progress-circular"),R=o("v-data-table"),g=o("v-card-title"),T=o("v-card-subtitle"),h=o("v-card-item"),F=o("v-col"),D=o("v-row"),H=o("v-spacer"),K=o("v-card-actions"),I=o("v-card"),Q=o("v-overlay");return d(),w(I,{class:"guide-container",elevation:"4",style:{"background-color":"rgb(228,228,228)"}},{default:t(()=>[e(u,{class:"guide-container-header"},{default:t(()=>[e(S,{block:"",label:"Введите продукт",variant:"solo-inverted","append-inner-icon":"mdi-magnify",type:"input",modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value=l),class:"pr-1",onInput:a[1]||(a[1]=l=>E(l.target.value))},null,8,["modelValue"]),y("div",ne,[m.value?(d(),w(f,{key:1,icon:"mdi-plus",onClick:a[3]||(a[3]=l=>p.value=!0)})):(d(),w(f,{key:0,height:"73%",onClick:a[2]||(a[2]=l=>p.value=!0)},{default:t(()=>[n("Добавить продукт")]),_:1}))]),e(M,{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=l=>p.value=l),width:"500"},{default:t(()=>[e(se,{onSetDialogAndShowFoods:L,foodBase:v.value},null,8,["foodBase"])]),_:1},8,["modelValue"])]),_:1}),x.value?(d(),b("div",ce,[e(q,{indeterminate:"",width:4})])):(d(),b("div",de)),e(R,{headers:j.value,items:i.value,height:"700","item-value":"name"},{item:t(({item:l})=>[y("tr",{onClick:X=>P(l)},[y("td",ue,c(l.name),1),y("td",ie,c(l.calories),1),m.value?V("",!0):(d(),b("td",_e,c(l.proteins),1)),m.value?V("",!0):(d(),b("td",ve,c(l.fats),1)),m.value?V("",!0):(d(),b("td",fe,c(l.carbs),1)),y("td",me,[l.canDelete?(d(),w(f,{key:0,variant:"text",icon:"mdi-delete","x-small":"",onClick:ee(X=>O(l),["stop"])},null,8,["onClick"])):V("",!0)])],8,re)]),_:1},8,["headers","items"]),e(Q,{modelValue:k.value,"onUpdate:modelValue":a[6]||(a[6]=l=>k.value=l),class:"align-center justify-center","min-width":"400","max-width":"700"},{default:t(()=>[e(I,null,{default:t(()=>[e(g,null,{default:t(()=>[n(c(r.value.name),1)]),_:1}),e(T,null,{default:t(()=>[n(" На "+c(r.value.productWeight?r.value.productWeight:100)+" г. продукта ",1)]),_:1}),e(u,null,{default:t(()=>[e(D,{"no-gutters":"",class:"text-center"},{default:t(()=>[e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[n(" Калории ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[n(c(r.value.calories),1)]),_:1})]),_:1})]),_:1}),e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[n(" Белок ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[n(c(r.value.proteins),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{"no-gutters":"",class:"text-center"},{default:t(()=>[e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[n(" Жиры ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[n(c(r.value.fats),1)]),_:1})]),_:1})]),_:1}),e(F,{class:"ma-1 bg-grey"},{default:t(()=>[e(h,null,{default:t(()=>[e(g,null,{default:t(()=>[n(" Углеводы ")]),_:1}),e(u,{class:"size-text"},{default:t(()=>[n(c(r.value.carbs),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(K,null,{default:t(()=>[e(H),e(f,{text:"Назад",onClick:a[5]||(a[5]=l=>k.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},xe=te(pe,[["__scopeId","data-v-e36c9faa"]]);export{xe as default};
