import{r as s,h as Q,o as X,a as n,b as M,k as h,w as t,d as a,v as Y,e as N,p as Z,f as m,c as ee,l as U}from"./index-CFsgWbWi.js";import{_ as le,u as ae,l as oe,f as te,c as f}from"./food_base-CL9Rx9jN.js";const se={class:"text-center pl-1"},ne={key:0,class:"text-center"},ue={__name:"GuidePage",setup(de){const B=ae(),{addMyFoods:I,getMyFoods:V,filterMyFoods:$,searchDuplicatesMyFood:D,updateMyFood:A,removeMyFoods:O}=B,r=s([]),S=s(""),k=s(!1),p=s(!1),i=s(""),c=s(100),b=s(""),_=s(""),g=s(""),y=s(""),d=s([]),W=[{title:"Название",align:"start",sortable:!1,key:"name"},{title:"Ккал",align:"end",sortable:!1,key:"calories"},{title:"Белок",align:"end",sortable:!1,key:"proteins"},{title:"Жиры",align:"end",sortable:!1,key:"fats"},{title:"Углеводы",align:"end",sortable:!1,key:"carbs"},{text:"Actions",align:"center",value:"actions",sortable:!1}],E=o=>{k.value=!0,G(o)},G=oe.debounce(o=>{const e=V();if(o){const u=J(o).map((x,F)=>({...x,productWeight:100,id:F+1})),v=$(o);d.value=[...v,...u],localStorage.setItem("showFoods",JSON.stringify(d.value)),console.log(d.value),k.value=!1}else d.value=[...e,...r.value],k.value=!1},1e3);function J(o){return r.value.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()))}const L=Q(()=>D(i.value)||b.value==""||_.value==""||g.value==""||y.value==""||i.value=="");function P(){const o={name:i.value,productWeight:c.value,calories:`${b.value} кКал`,proteins:`${_.value} г`,fats:`${g.value} г`,carbs:`${y.value} г`};I(o),d.value=[...V(),...r.value],c.value=100,C(),p.value=!1}function R(){C(),c.value=100,p.value=!1}function C(){i.value="",c.value=100,b.value="",_.value="",g.value="",y.value=""}function T(o){O(o.id),d.value=[...V(),...r.value]}return X(async()=>{r.value=te,localStorage.getItem("myFoods")&&A(JSON.parse(localStorage.getItem("myFoods"))),d.value=[...V(),...r.value]}),(o,e)=>{const u=n("v-text-field"),v=n("v-btn"),x=n("v-card-title"),F=n("v-card-text"),w=n("v-card"),j=n("v-form"),q=n("v-dialog"),z=n("v-progress-circular"),H=n("v-icon"),K=n("v-data-table");return M(),h(w,{class:"guide-container",elevation:"4",style:{"background-color":"rgb(228,228,228)"}},{default:t(()=>[a(F,{class:"guide-container-header"},{default:t(()=>[a(u,{block:"",label:"Введите продукт",variant:"solo-inverted","append-inner-icon":"mdi-magnify",type:"input",modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),class:"pr-1",onInput:e[1]||(e[1]=l=>E(l.target.value))},null,8,["modelValue"]),Y("div",se,[a(v,{height:"73%",onClick:e[2]||(e[2]=l=>p.value=!0)},{default:t(()=>[N("Добавить продукт")]),_:1})]),a(q,{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=l=>p.value=l),width:"500"},{default:t(()=>[a(j,{"fast-fail":"",onSubmit:e[9]||(e[9]=Z(()=>{},["prevent"]))},{default:t(()=>[a(w,{"min-height":"500"},{actions:t(()=>[a(v,{class:"ms-auto",text:"Cancel",onClick:R}),a(v,{text:"Ok",type:"submit",disabled:L.value,onClick:P},null,8,["disabled"])]),default:t(()=>[a(x,null,{default:t(()=>[N(" Добавить новое блюдо/напиток ")]),_:1}),a(F,{class:"pa-0"},{default:t(()=>[a(u,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=l=>i.value=l),rules:[m(f).checkStringName],label:"Название"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),rules:[m(f).checkNumber],label:"г/мл"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=l=>b.value=l),rules:[m(f).checkNumber],label:"Калории"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=l=>_.value=l),rules:[m(f).checkNumber],label:"Белок"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:g.value,"onUpdate:modelValue":e[7]||(e[7]=l=>g.value=l),rules:[m(f).checkNumber],label:"Жиры"},null,8,["modelValue","rules"]),a(u,{type:"number",modelValue:y.value,"onUpdate:modelValue":e[8]||(e[8]=l=>y.value=l),rules:[m(f).checkNumber],label:"Углеводы"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),k.value?(M(),ee("div",ne,[a(z,{indeterminate:""})])):U("",!0),a(K,{headers:W,items:d.value,height:"700","item-value":"name"},{"item.actions":t(({item:l})=>[l.canDelete?(M(),h(v,{key:0,variant:"text",icon:"","x-small":"",onClick:re=>T(l)},{default:t(()=>[a(H,null,{default:t(()=>[N("mdi-delete")]),_:1})]),_:2},1032,["onClick"])):U("",!0)]),_:1},8,["items"])]),_:1})}}},ve=le(ue,[["__scopeId","data-v-bc0fc4f5"]]);export{ve as default};
